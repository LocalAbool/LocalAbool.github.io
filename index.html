<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" />
  <title>Local.Abool</title>
  <link href="https://fonts.googleapis.com/css?family=Inter:400,500,700,900&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, sans-serif; background: #f9fafb; margin: 0; padding: 0; min-height: 100vh; width: 100%; overflow-x: hidden; }
    .bg-indigo-600 { background: #4f46e5; }
    .bg-white { background: #fff; }
    .rounded-xl { border-radius: 1rem; }
    .rounded-2xl { border-radius: 1.5rem; }
    .rounded-lg { border-radius: .5rem; }
    .rounded-md { border-radius: .4rem; }
    .overflow-hidden { overflow: hidden; }
    .border { border: 1px solid #e5e7eb; }
    .border-gray-200 { border-color: #e5e7eb; }
    .min-h-screen { min-height: 100vh; }
    .bg-gray-50 { background: #f9fafb; }
    .bg-gray-100 { background: #f3f4f6; }
    .bg-black\/60 { background: rgba(0,0,0,.60); }
    .backdrop-blur-sm { backdrop-filter: blur(4px);}
    .text-lg { font-size: 1.125rem; }
    .text-xl { font-size: 1.25rem; }
    .text-2xl { font-size: 1.5rem; }
    .text-3xl { font-size: 1.875rem; }
    .font-bold { font-weight: 700; }
    .font-semibold { font-weight: 600; }
    .font-medium { font-weight: 500; }
    .text-white { color:#fff;}
    .text-gray-400 { color:#9ca3af;}
    .text-gray-500 { color:#6b7280;}
    .text-gray-600 { color:#4b5563;}
    .text-gray-700 { color:#374151;}
    .text-gray-800 { color:#1f2937;}
    .text-gray-900 { color:#111827;}
    .text-green-600 { color: #16a34a;}
    .text-purple-600 { color: #8b5cf6;}
    .text-orange-500 { color: #f97316;}
    .text-indigo-600 { color:#4f46e5;}
    .p-3  { padding:0.75rem;}
    .p-4 { padding: 1rem;}
    .p-6 { padding: 1.5rem;}
    .p-8 { padding: 2rem;}
    .px-2 {padding-left:.5rem;padding-right:.5rem;}
    .px-2\.5 {padding-left:.625rem;padding-right:.625rem;}
    .px-4 {padding-left:1rem;padding-right:1rem;}
    .px-6 {padding-left:1.5rem;padding-right:1.5rem;}
    .py-0\.5 {padding-top:2px;padding-bottom:2px;}
    .py-1 { padding-top: .25rem; padding-bottom: .25rem; }
    .py-3 { padding-top:.75rem;padding-bottom:.75rem;}
    .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
    .py-8 { padding-top: 2rem; padding-bottom: 2rem; }
    .py-12 {padding-top:3rem;padding-bottom:3rem;}
    .mb-2 { margin-bottom: .5rem;}
    .mb-3 {margin-bottom: .75rem;}
    .mb-6 { margin-bottom: 1.5rem;}
    .mb-8 {margin-bottom:2rem;}
    .mt-12 {margin-top:3rem;}
    .w-4 {width:1rem;}
    .w-6 {width:1.5rem;}
    .w-7 {width:1.75rem;}
    .w-8 {width:2rem;}
    .h-4 {height:1rem;}
    .h-6 {height:1.5rem;}
    .h-7 {height:1.75rem;}
    .h-8 {height:2rem;}
    .h-32 {height:8rem;}
    .h-40 {height:10rem;}
    .h-64 {height:16rem;}
    .max-w-4xl {max-width:56rem;}
    .max-w-7xl {max-width:80rem;}
    .mx-auto {margin-left:auto;margin-right:auto;}
    .gap-2 {gap:.5rem;}
    .gap-4 {gap:1rem;}
    .gap-6 {gap:1.5rem;}
    .grid {display:grid;}
    .grid-cols-2 {grid-template-columns:repeat(2,1fr);}
    .grid-cols-3 {grid-template-columns:repeat(3,1fr);}
    .grid-cols-4 {grid-template-columns:repeat(4,1fr);}
    @media (min-width:768px){
      .md\:grid-cols-3 {grid-template-columns:repeat(3,1fr);}
      .md\:grid-cols-4 {grid-template-columns:repeat(4,1fr);}
    }
    .flex {display:flex;}
    .inline-flex {display:inline-flex;}
    .items-center {align-items:center;}
    .items-between {justify-content:space-between;}
    .justify-between {justify-content:space-between;}
    .justify-center {justify-content:center;}
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .shadow-lg {box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);}
    .shadow-sm {box-shadow:0 1px 2px 0 rgba(0,0,0,.05);}
    .border-b {border-bottom:1px solid #e5e7eb;}
    .sticky {position:sticky;}
    .top-0 {top:0;}
    .z-50 {z-index:50;}
    .transition-all {transition:all .3s;}
    .transition-transform {transition:transform .5s;}
    .duration-300 {transition-duration: .3s;}
    .duration-500 {transition-duration: .5s;}
    .hover\:scale-110:hover {transform:scale(1.1);}
    .hover\:shadow-lg:hover {box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);}
    .hover\:bg-indigo-700:hover {background:#4338ca;}
    .hover\:text-gray-900:hover {color: #111827;}
    .hover\:text-indigo-700:hover {color: #3730a3;}
    .group:hover .group-hover\:scale-110 {transform: scale(1.1);}
    @media (max-width: 767px) {
      .max-w-7xl, .max-w-4xl, main, header > div {max-width: 100% !important; padding-left: 1rem !important; padding-right: 1rem !important;}
      .grid-cols-2, .md\:grid-cols-3, .md\:grid-cols-4, .grid-cols-3, .grid-cols-4 {grid-template-columns: 1fr !important;}
      .text-3xl { font-size: 1.5rem !important; }
      .p-8 { padding: 1rem !important; }
      .h-64 { height: 12rem !important; }
      #replit-badge { display: none !important; }
      iframe[src*="replit.com/badge"] { display: none !important; }
    }
    .cursor-pointer {cursor:pointer;}
    .overflow-x-auto {overflow-x:auto;}
    .border {border:1px solid #e5e7eb;}
    .-mx-2 {margin-left:-.5rem;margin-right:-.5rem;}
    .hover\:bg-gray-100:hover {background:#f3f4f6;}
    button, .button, .btn {
      outline:none;border:none;padding:.5rem 1rem;border-radius:.5rem;font-size:1rem;background:#4f46e5;color:white;font-weight:500;cursor:pointer;transition:background .2s;
    }
    button:hover, .button:hover, .btn:hover {background:#4338ca;}
    pre {margin:0;}
    .font-mono {font-family: Menlo, Monaco, 'Cascadia Mono','Segoe UI Mono','Roboto Mono',monospace;}
    .leading-relaxed {line-height: 1.6;}
    a, button { outline:none;}
    .hidden {display:none;}
    .layout-container {
      display: flex;
      max-width: 1200px;
      margin: 0 auto;
      flex-direction: column;
      width: 100%;
    }
    .layout-content {
      flex: 1;
      min-width: 0;
      width: 100%;
    }
    .layout-sidebar-right {
      width: 160px;
      min-width: 160px;
      margin: 20px auto;
    }
    .layout-sidebar-left {
      display: none; /* Removed as requested */
    }
    @media (min-width: 768px) {
      .layout-container {
        flex-direction: row;
        align-items: flex-start;
      }
      .layout-sidebar-right {
        margin: 0 0 0 20px;
      }
    }
    @media (max-width: 767px) {
      .layout-sidebar-right {
        width: 100% !important;
        max-width: 320px !important;
        min-width: 0 !important;
        margin: 30px auto !important;
        display: flex !important;
        justify-content: center !important;
      }
      .layout-sidebar-right iframe {
        max-width: 100% !important;
      }
      .layout-container {
        gap: 20px !important;
      }
    }
    .search-container {
      position: relative;
      max-width: 400px;
      width: 100%;
    }
    .search-input {
      width: 100%;
      padding: 0.5rem 1rem 0.5rem 2.5rem;
      border-radius: 0.5rem;
      border: 1px solid #e5e7eb;
      outline: none;
      font-size: 0.875rem;
    }
    .search-icon {
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: #9ca3af;
      width: 1rem;
      height: 1rem;
    }
    .ad-card {
      background: white;
      border-radius: 1rem;
      border: 1px solid #e5e7eb;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 250px;
      overflow: hidden;
    }
  </style>
  <style>
    .replit-auth-button, #replit-badge, iframe[src*="replit.com/badge"], .replit-badge {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
  </style>
  <script src="https://pl28354591.effectivegatecpm.com/71/57/18/7157184b3004eeaf20954e0076346feb.js"></script>
  <script src="https://pl28354604.effectivegatecpm.com/1e/a7/b7/1ea7b768378ea2114d0e1aaa8c750ba0.js"></script>
</head>
<body>
  <div style="display:flex;justify-content:center;margin:20px 0; max-width: 100%; overflow: hidden;">
    <script>
      atOptions = {
        'key' : '063119b72d9b7e12b26344c8d96ecc88',
        'format' : 'iframe',
        'height' : 90,
        'width' : 728,
        'params' : {}
      };
    </script>
    <script src="https://www.highperformanceformat.com/063119b72d9b7e12b26344c8d96ecc88/invoke.js"></script>
  </div>
  <div class="layout-container">
    <div class="layout-content">
      <div id="app"></div>
    </div>
    <div class="layout-sidebar-right">
      <script>
        atOptions = {
          'key' : '183ae01d06f739dd1de52c42fd74dde7',
          'format' : 'iframe',
          'height' : 600,
          'width' : 160,
          'params' : {}
        };
      </script>
      <script src="https://www.highperformanceformat.com/183ae01d06f739dd1de52c42fd74dde7/invoke.js"></script>
    </div>
  </div>
  <script>
    const SCRIPTS = [
      {
        id: 1,
        title: "Infinite Jump",
        description: "Allows your character to jump infinitely in the air. Great for reaching high places!",
        image: "https://images.unsplash.com/photo-1614294149010-950b698f72c0?w=400&h=250&fit=crop",
        views: 5100,
        gameLink: "https://www.roblox.com/games/123456789/Game-Name",
        script: `-- Infinite Jump Script
local UserInputService = game:GetService("UserInputService")
local player = game.Players.LocalPlayer

UserInputService.JumpRequest:Connect(function()
    if player.Character then
        player.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)`
      },
      {
        id: 2,
        title: "Speed Boost",
        description: "Increases your walk speed to move faster across the map. Adjustable speed value.",
        image: "https://images.unsplash.com/photo-1511512578047-dfb367046420?w=400&h=250&fit=crop",
        views: 3800,
        gameLink: "https://www.roblox.com/games/123456789/Game-Name",
        script: `-- Speed Boost Script
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Change 50 to your desired speed
humanoid.WalkSpeed = 50`
      },
      {
        id: 3,
        title: "Fly Script",
        description: "Enables flight mode for your character. Use E to toggle, WASD to move while flying.",
        image: "https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?w=400&h=250&fit=crop",
        views: 7200,
        gameLink: "https://www.roblox.com/games/123456789/Game-Name",
        script: `-- Fly Script (Press E to toggle)
local flying = false
local speed = 50

game:GetService("UserInputService").InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.E then
        flying = not flying
        local player = game.Players.LocalPlayer
        local char = player.Character
        if flying then
            -- Enable fly
            local bp = Instance.new("BodyPosition", char.HumanoidRootPart)
            bp.Name = "FlyBP"
            bp.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
        else
            -- Disable fly
            char.HumanoidRootPart:FindFirstChild("FlyBP"):Destroy()
        end
    end
end)`
      },
      {
        id: 4,
        title: "ESP Players",
        description: "Highlights all players through walls with colored boxes. Great for finding other players.",
        image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&h=250&fit=crop",
        views: 6400,
        gameLink: "https://www.roblox.com/games/123456789/Game-Name",
        script: `-- ESP Script
local Players = game:GetService("Players")

local function addESP(player)
    if player ~= Players.LocalPlayer then
        local highlight = Instance.new("Highlight")
        highlight.Parent = player.Character
        highlight.FillColor = Color3.new(1, 0, 0)
        highlight.OutlineColor = Color3.new(1, 1, 1)
        highlight.FillTransparency = 0.5
    end
end

Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function()
        addESP(player)
    end)
end)

for _, player in pairs(Players:GetPlayers()) do
    if player.Character then addESP(player) end
end`
      },
      {
        id: 5,
        title: "Auto Farm",
        description: "Automatically farms resources for you. Set it and forget it!",
        image: "https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=400&h=250&fit=crop",
        views: 9100,
        gameLink: "https://www.roblox.com/games/123456789/Game-Name",
        script: `-- Auto Farm Script
local player = game.Players.LocalPlayer
local farming = true

while farming do
    -- Your auto farm logic here
    wait(1)
end`
      },
      {
        id: 6,
        title: "Anti-AFK",
        description: "Prevents you from being kicked for inactivity. Stay in the game longer!",
        image: "https://images.unsplash.com/photo-1556438064-2d7646166914?w=400&h=250&fit=crop",
        views: 4700,
        gameLink: "https://www.roblox.com/games/123456789/Game-Name",
        script: `-- Anti-AFK Script
local VirtualUser = game:GetService("VirtualUser")

game:GetService("Players").LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)`
      },
    ];

    function flameSVG(cls="") {
      return `<svg xmlns="http://www.w3.org/2000/svg" class="${cls}" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path stroke="#f97316" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M17.896 17.61A7.53 7.53 0 0 1 12 21C8.228 21 5 18.53 5 15c0-2.42 1.128-5.041 2.674-7.144A13.275 13.275 0 0 1 12 3.5s2.595 2.663 3.267 5.607"></path><path stroke="#f97316" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M16 16h.01"></path></svg>`;
    }
    function arrowLeftSVG(cls="") {
      return `<svg xmlns="http://www.w3.org/2000/svg" class="${cls}" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><path stroke="#374151" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 19l-7-7 7-7"/><path stroke="#374151" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M19 12H5"/></svg>`;
    }
    function copySVG(cls="") {
      return `<svg xmlns="http://www.w3.org/2000/svg" class="${cls}" width="1em" height="1em" fill="none" viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" stroke="#fff" stroke-width="2"/><rect x="3" y="3" width="13" height="13" rx="2" stroke="#fff" stroke-width="2"/></svg>`;
    }
    function searchSVG(cls="") {
      return `<svg xmlns="http://www.w3.org/2000/svg" class="${cls}" width="1em" height="1em" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>`;
    }
    function createPageUrl(hash) {
      return "#" + hash;
    }
    function formatViews(num) {
      return num >= 1000 ? (num / 1000).toFixed(1) + "k" : num;
    }
    let showTrending = false;
    let currentPage = "Home";
    let currentScriptId = null;
    let searchQuery = "";

    function renderHeader() {
      return `
      <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
          <a href="${createPageUrl('Home')}" class="flex items-center gap-2" onclick="navigateHome(event)">
            <div class="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center">
              <span class="text-white font-bold text-lg">üìú</span>
            </div>
            <span class="text-xl font-bold text-gray-900">Local.Abool</span>
          </a>
          <div class="hidden md:block search-container mx-4">
            ${searchSVG("search-icon")}
            <input type="text" placeholder="Search scripts..." class="search-input" oninput="handleSearch(event)" value="${searchQuery}" />
          </div>
          <nav class="flex items-center gap-6">
            <button type="button" onclick="setTrending(false)" class="flex items-center gap-2 text-sm font-medium ${!showTrending ? 'text-indigo-600' : 'text-gray-700 hover:text-gray-900'}">
              <span>üè†</span>
              <span>Home</span>
            </button>
            <button type="button" onclick="setTrending(true)" class="flex items-center gap-2 text-sm font-medium ${showTrending ? 'text-indigo-600' : 'text-gray-700 hover:text-gray-900'}">
              ${flameSVG("w-4 h-4")}
              <span>Trending</span>
            </button>
          </nav>
        </div>
        <div class="md:hidden px-6 pb-4">
          <div class="search-container">
            ${searchSVG("search-icon")}
            <input type="text" placeholder="Search scripts..." class="search-input" oninput="handleSearch(event)" value="${searchQuery}" />
          </div>
        </div>
      </header>
      `;
    }
    function scriptCard({id, title, image, views}) {
      return `
      <a href="${createPageUrl('ScriptDetails?id='+id)}" class="group relative bg-white rounded-xl overflow-hidden border border-gray-200 hover:shadow-lg transition-all duration-300" onclick="openScriptDetail(event, ${id})">
        <div class="relative h-40 overflow-hidden bg-gray-100">
          <img src="${image}" alt="${title}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" />
          <div class="absolute top-3 left-3 px-2.5 py-1 bg-black/60 backdrop-blur-sm rounded-md">
            <span class="text-xs font-medium text-white">üëÅ ${formatViews(views)}</span>
          </div>
        </div>
        <div class="p-4">
          <h3 class="text-sm font-semibold text-gray-900 line-clamp-2">${title}</h3>
        </div>
      </a>`;
    }
    function adCard() {
      const uniqueKey = Math.random().toString(36).slice(2, 10);
      const adId = "ad-" + uniqueKey;
      setTimeout(() => {
        const container = document.getElementById(adId);
        if (container) {
          window.atOptions = {
            'key' : '1ef66bfa49c8e8c61e549d1d71b76b76',
            'format' : 'iframe',
            'height' : 250,
            'width' : 300,
            'params' : {}
          };
          const script = document.createElement('script');
          script.src = 'https://www.highperformanceformat.com/1ef66bfa49c8e8c61e549d1d71b76b76/invoke.js';
          script.async = true;
          container.appendChild(script);
        }
      }, 0);
      return `<div id="${adId}" class="ad-card"></div>`;
    }
    function renderHome() {
      let displayScripts = showTrending ? [...SCRIPTS].sort((a, b) => b.views - a.views) : SCRIPTS;
      if (searchQuery) {
        displayScripts = displayScripts.filter(s => s.title.toLowerCase().includes(searchQuery.toLowerCase()));
      }
      const gridItems = [];
      displayScripts.forEach((script, index) => {
        gridItems.push(scriptCard(script));
        if ((index + 1) % 2 === 0) {
          gridItems.push(adCard());
        }
      });
      return `
        ${renderHeader()}
        <main class="max-w-7xl mx-auto px-6 py-12">
          <h1 class="text-3xl font-bold text-gray-900 mb-8 flex items-center gap-2">
            ${showTrending ? "Top trending scripts" : "Check out recent trending scripts"}
            <span>${flameSVG("w-7 h-7 text-orange-500")}</span>
          </h1>
          <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            ${gridItems.join('')}
          </div>
          ${displayScripts.length === 0 ? `
            <div class="text-center py-20">
              <p class="text-gray-400">No scripts found matching "${searchQuery}"</p>
            </div>
          ` : ''}
        </main>
      `;
    }
    function renderScriptDetails(scriptId) {
      const script = SCRIPTS.find(s => s.id === Number(scriptId));
      const recommended = SCRIPTS.filter(s => s.id !== Number(scriptId)).slice(0,4);
      if (!script) {
        return `
          <div class="min-h-screen bg-gray-50 flex items-center justify-center">
            <div class="text-center px-6">
              <h1 class="text-2xl font-bold text-gray-900 mb-2">Script Not Found</h1>
              <p class="text-gray-500 mb-6">The script you're looking for doesn't exist.</p>
              <a href="${createPageUrl('Home')}" class="inline-flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700" onclick="navigateHome(event)">
                ${arrowLeftSVG("w-4 h-4")}
                Back to Home
              </a>
            </div>
          </div>
        `;
      }
      const recommendedItems = [];
      recommended.forEach((recScript, index) => {
        recommendedItems.push(scriptCard(recScript));
        if ((index + 1) % 2 === 0) {
          recommendedItems.push(adCard());
        }
      });
      return `
        ${renderHeader()}
        <main class="max-w-4xl mx-auto px-6 py-8">
          <a href="${createPageUrl('Home')}" class="inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6" onclick="navigateHome(event)">
            ${arrowLeftSVG("w-4 h-4")}
            <span class="text-sm font-medium">Back</span>
          </a>
          <div class="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
            <div class="relative h-64 bg-gray-100">
              <img src="${script.image}" alt="${script.title}" class="w-full h-full object-cover"/>
            </div>
            <div class="p-8">
              <div class="mb-6">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">${script.title}</h1>
                <div class="flex items-center gap-4 text-sm text-gray-500">
                  <span>üëÅ ${formatViews(script.views)} views</span>
                  ${script.gameLink ? `<span>‚Ä¢</span>
                  <a href="${script.gameLink}" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:text-indigo-700 font-medium">
                    üéÆ Game Link
                  </a>` : ''}
                </div>
              </div>
              <div class="mb-8">
                <h2 class="text-lg font-semibold text-gray-900 mb-3">Description</h2>
                <div class="bg-gray-50 rounded-lg p-4">
                  <p class="text-gray-700 text-sm">${script.description}</p>
                </div>
              </div>
              <div>
                <div class="flex items-center justify-between mb-3">
                  <span class="text-sm font-medium text-gray-700">View Raw</span>
                  <button class="flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700" onclick="copyToClipboard(${script.id})" id="copy-btn">
                    ${copySVG("w-4 h-4")}
                    <span id="copy-btn-text">Copy Script</span>
                  </button>
                </div>
                <div class="bg-gray-50 rounded-lg p-6 overflow-x-auto border border-gray-200 font-mono">
                  <pre class="text-sm leading-relaxed font-mono text-gray-800">${highlightCode(script.script)}</pre>
                </div>
              </div>
            </div>
          </div>
          ${recommended.length ? `
            <div class="mt-12">
              <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2">
                More scripts you might like ${flameSVG("w-6 h-6 text-orange-500")}
              </h2>
              <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                ${recommendedItems.join('')}
              </div>
            </div>
          `: ''}
        </main>
      `;
    }
    function highlightCode(src) {
      const keywords = ['local', 'function', 'if', 'end', 'return', 'for', 'while', 'do', 'then', 'else'];
      return src.split('\n').map(line => {
        let html = line;
        if (line.trim().startsWith('--')) {
          return `<div class="hover:bg-gray-100 px-2 -mx-2 rounded"><span class="text-green-600">${line.replace(/ /g,'&nbsp;')}</span></div>`;
        }
        let reg = new RegExp('\\b(' + keywords.join('|') + ')\\b', 'g');
        html = html.replace(reg, `<span class="text-purple-600 font-semibold">$1</span>`);
        return `<div class="hover:bg-gray-100 px-2 -mx-2 rounded">${html.replace(/ /g,'&nbsp;')}</div>`;
      }).join('');
    }
    function handleSearch(e) {
      searchQuery = e.target.value;
      render();
    }
    function openScriptDetail(e, id) {
      e.preventDefault();
      currentPage = "ScriptDetails";
      currentScriptId = id;
      render();
      window.scrollTo(0,0);
      window.location.hash = "ScriptDetails?id=" + id;
    }
    function navigateHome(e) {
      e.preventDefault();
      currentPage = "Home";
      window.location.hash = "Home";
      render();
      window.scrollTo(0,0);
    }
    function setTrending(value) {
      showTrending = value;
      render();
    }
    function copyToClipboard(scriptId) {
      const script = SCRIPTS.find(s => s.id === Number(scriptId));
      if (script) {
        if(navigator?.clipboard) {
          navigator.clipboard.writeText(script.script);
        } else {
          let el = document.createElement('textarea');
          el.value = script.script;
          document.body.appendChild(el);
          el.select();
          document.execCommand('copy');
          document.body.removeChild(el);
        }
        let btn = document.getElementById('copy-btn-text');
        btn.textContent = 'Copied!';
        setTimeout(()=>{btn.textContent = 'Copy Script';},2000);
        window.open("https://www.effectivegatecpm.com/uw2i16p1e?key=24001f0b404d36d6c209c0c5be845eb0", "_blank");
      }
    }
    function handleHash() {
      if (window.location.hash.startsWith("#ScriptDetails?id=")) {
        currentPage = "ScriptDetails";
        currentScriptId = window.location.hash.split("=")[1];
      } else {
        currentPage = "Home";
        currentScriptId = null;
      }
      render();
    }
    window.onhashchange = handleHash;
    function render() {
      const el = document.getElementById('app');
      if (currentPage === "Home") {
        el.innerHTML = renderHome();
      } else if (currentPage === "ScriptDetails") {
        el.innerHTML = renderScriptDetails(currentScriptId);
      }
    }
    handleHash();
    window.setTrending = setTrending;
    window.openScriptDetail = openScriptDetail;
    window.navigateHome = navigateHome;
    window.copyToClipboard = copyToClipboard;
    window.handleSearch = handleSearch;
  </script>
</body>
</html>
